/*
 * BibleSync library
 *
 * Karl Kleinpaste, May 2014
 *
 * All files related to implementation of BibleSync, including program
 * source, READMEs, manual pages, and related similar documents, are in
 * the public domain.  As a matter of simple decency, your social
 * obligations are to credit the source and to coordinate any changes you
 * make back to the origin repository.  These obligations are non-
 * binding for public domain software, but they are to be seriously
 * handled nonetheless.
 */

http://biblesyncprotocol.wikispaces.com
(user "General_Public", password "password")

Xiphos provides the first implementation of BibleSync protocol, a method
for shared navigation of Bible programs over multicast UDP.  This
implementation is very general, and completely agnostic as to the nature
of other software in which it operates.  It is explicitly NOT specific to
Sword Project applications, though that is the environment from which it
emanates.

See src/backend/biblesync.hh for comments which detail the public
interface of this implementation.  It is deliberately small and
well-contained, with no extraneous features offered: setup, take-down,
xmit, and recv, plus 2 "get" requests for current mode and passphrase.

BibleSync has 4 modes:
- Disabled.
- Personal, in which the program both xmits and recvs.  Useful for one
  person using multiple simultaneous programs on different devices, or for
  teams working together (e.g. translators).
- Speaker, in which the program xmits navigation synchronization but
  does not recv any.
- Audience, in which the program recvs navigation synchronization but does
  not xmit any.

A few liberties have been taken with the spec, with the intent that these
changes propagate back into a revised version:

- application version and user identification are required, and sent in
  every packet.  It seems only reasonable that everyone identify himself
  fully when participating in a network conversation.
- packet header is expanded to fill exactly 32 bytes, using 6 fill bytes,
  reserved for potential future use.
- UUID is placed at header's end, aligned on 16-byte boundary.
- There is a single passphrase parameter, msg.sync.passPhrase, for use in
  either personal or classroom mode.  There is no sense in having distinct
  fields when exactly one of them is in use at any one time.
- Body "name=value" elements are newline-terminated, not newline-delimited.
  The point of this difference is ease and regularity of parsing, ensuring
  that every element's termination can be consistently found.
- No TTL-limiting support is present.  Due to the nature of there being a
  single receiver on a UDP socket, zeroing TTL so that multicast packets
  do not leave the local machine is useless, because only this program is
  receiving the multicast datagrams.  Simply turn off BibleSync.

In the future, BibleSync will be separated into its own library,
libbiblesync.{so,dll}, for inclusion in any other Bible program.

Karl Kleinpaste
April 2014
